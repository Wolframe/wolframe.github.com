<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<title>Wolframe: Wolframe, a modular, 3-tier application server written in C++</title>
	<meta name="generator" content="Doxygen 1.8.7"/>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
	<link href="/layout/styles/main.css" rel="stylesheet" type="text/css" media="all" />
	<link href="/layout/styles/mediaqueries.css" rel="stylesheet" type="text/css" media="all" />
	<!--[if lt IE 9]>
		<link href="/layout/styles/ie/ie8.css" rel="stylesheet" type="text/css" media="all" />
		<script src="/layout/scripts/ie/css3-mediaqueries.min.js"></script>
		<script src="/layout/scripts/ie/html5shiv.min.js"></script>
	<![endif]-->
	<link href="tabs.css" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="dynsections.js"></script>
	<link href="stylesheet-doxygen-webpage.css" rel="stylesheet" type="text/css" />
</head>
<body class="">
<div class="wrapper row1">
	<header id="header" class="full_width clear">
		<div id="header-logo">
			<h1><a href="/index.html">Project Wolframe</a></h1>
			<h2>The Straight Path to Successful Projects</h2>
		</div>
		<div id="header-search">
			<form id="cse-search-box" action="http://www.wolframe.net/gsearch.html">
				<input type="hidden" name="cx" value="007231504736047898702:wrnjvfljzvu" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" size="31" />
<!--				<input type="submit" name="sa" value="&#xf002;" /> -->
				<input type="submit" name="sa" class="search-bttn" value="" />
			</form>
		</div>
	</header>
</div>
<!-- ################################################################################################ -->
<div class="wrapper row2">
	<nav id="topnav">
		<ul class="clear">
<!-- BEGIN MENU -->
			<li><a href="/index.html" title="Home">Home</a></li>
			<li><a href="/downloads.html" title="Downloads">Downloads</a></li>
			<li class="active"><a href="/documentation.html" title="Documentation">Documentation</a></li>
			<li><a class="drop" href="/support.html" title="Support">Support</a>
				<ul>
					<li><a href="/faqs.html" title="FAQ">FAQ</a></li>
					<li><a href="http://sourceforge.net/p/wolframe/mailman/" title="Mailing lists">Mailing lists</a></li>
				</ul>
			</li>
			<li class="last-child"><a href="/contact.html" title="Contact Us">Contact Us</a></li>
<!-- END MENU -->
		</ul>
	</nav>
</div>
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<!-- content -->
<div class="wrapper row3">
	<div id="container">
		<h2>Wolframe, 0.0.2</h2>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!--</div> /top, this will be generated by doxygen later on! -->
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Wolframe, a modular, 3-tier application server written in C++ </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="ModuleTypes"></a>
Writing modules for Wolframe</h1>
<h2><a class="anchor" id="ModuleTypeIntro"></a>
Introduction</h2>
<p>In Wolframe we can write modules for extending our application. Modules are units that export objects that can be used as components. The main source file of the module contains the following code block that declares the objects to be exported by the module. For using the macros shown in the following examples, we have to include the file <a class="el" href="appDevel_8hpp.html">include/appDevel.hpp</a> or the sub-include files needed. </p><div class="fragment"><div class="line"><a class="code" href="moduleFrameMacros_8hpp.html#a5c94abd61d1619c761279522e203a4a4">WF_MODULE_BEGIN</a>( <span class="stringliteral">&quot;MyModule&quot;</span>, <span class="stringliteral">&quot;this text is a short, one line description of the module&quot;</span>)</div>
<div class="line"> <span class="comment">// ... here we declare the components to export</span></div>
<div class="line"><a class="code" href="moduleFrameMacros_8hpp.html#ad59c3d56591ee809897499a5d99bcd04">WF_MODULE_END</a></div>
</div><!-- fragment --> <h2><a class="anchor" id="ModuleObjTypeList"></a>
Module component types in Wolframe</h2>
<ul>
<li>Command handler<ul>
<li>A command handler implements a sub part ot the client server protocol. Command handlers are the central processing units also refered to as processors. They are declared in the section Processor of the main configuration. Currently there exist only two types of command handlers:<ol type="1">
<li>the standard command handler also called direct map. The standard command handler delegates the requests to functions to execute. It uses the filter modules to get an iterator on the input to pass to functions to execute. It uses forms declared to validate input and output.</li>
<li>the lua command handler</li>
</ol>
</li>
</ul>
</li>
<li>Document type detection<ul>
<li>For each document format processed you need a document type detection. A document type detection recognizes a document format and declares is as its own. Additionally it extracts the document type identifier needed by a command handler to associate a document with a function to execute. Currently there are two document type detection modules implemented:<ol type="1">
<li>XML</li>
<li>JSON</li>
</ol>
</li>
</ul>
</li>
<li>Filter type</li>
<li>Form Function</li>
<li>Program type</li>
<li>DDL compiler</li>
<li>Custom data type</li>
<li>Normalization function</li>
</ul>
<h2><a class="anchor" id="ModuleTypeList"></a>
Special module types in Wolframe</h2>
<p>The following module types do not have yet macros defined to declare them as the components introduced in the previous section. We have to refer to examples for the time being.</p><ul>
<li>Authentication<ul>
<li>An authentication module implements the object authentication unit and authenticator slice. An authentication unit declares one or more authentication mechs that can be chosen by the client for authentication when the module is loaded and configured in the section AAAA of the configuration. When more than one authentication unit implements an authentication mech then the first one in the configuration is chosen. The authentication slice is an instance created to do the authentication procedure. The result of authentication is a User (<a class="el" href="class__Wolframe_1_1AAAA_1_1User.html" title="Data structure containing all login data of a user. ">_Wolframe::AAAA::User</a>) object in the execution context (<a class="el" href="class__Wolframe_1_1proc_1_1ExecContext.html" title="Execution context passed to functions for referencing resources and to define authorization dependend...">_Wolframe::proc::ExecContext</a>) that is the base for authorization to do anything (user privileges). The authorization module type does not yet have the constructors declared in the section before. We have to declare four classes involved:<ol type="1">
<li>configuration (implements <a class="el" href="class__Wolframe_1_1config_1_1NamedConfiguration.html" title="A named configuration is a normal configuration that provides also an className function. ">_Wolframe::config::NamedConfiguration</a>)</li>
<li>authentication unit (implements <a class="el" href="class__Wolframe_1_1AAAA_1_1AuthenticationUnit.html" title="This is the base class for the authentication unit implementations. ">_Wolframe::AAAA::AuthenticationUnit</a>)</li>
<li>authenticator slice (implements <a class="el" href="class__Wolframe_1_1AAAA_1_1AuthenticatorSlice.html" title="This is the base class for authenticator slices implementations An authenticator has (usually) severa...">_Wolframe::AAAA::AuthenticatorSlice</a>)</li>
<li>password changer (implements <a class="el" href="class__Wolframe_1_1AAAA_1_1PasswordChanger.html" title="Password changer interface This the only interface to be used by the system. All other interfaces are...">_Wolframe::AAAA::PasswordChanger</a>)</li>
</ol>
</li>
<li>Have a look at the standard textfile authenticator implementing the mech WOLFRAME-CRAM as example in src/modules/authentication/textfile/TextFileAuth.hpp</li>
</ul>
</li>
<li>Database<ul>
<li>A database module is a quite complex component. The following interfaces have to be implemented:<ol type="1">
<li>configuration (implements <a class="el" href="class__Wolframe_1_1config_1_1NamedConfiguration.html" title="A named configuration is a normal configuration that provides also an className function. ">_Wolframe::config::NamedConfiguration</a>)</li>
<li>database language description (implements <a class="el" href="class__Wolframe_1_1db_1_1LanguageDescription.html" title="Interface to properties of the database language (SQL) ">_Wolframe::db::LanguageDescription</a>)</li>
<li>database unit (implements <a class="el" href="class__Wolframe_1_1db_1_1DatabaseUnit.html" title="This is the base class for database unit implementations. ">_Wolframe::db::DatabaseUnit</a>)</li>
<li>database (implements <a class="el" href="class__Wolframe_1_1db_1_1Database.html" title="Base class for database interface. All databases should provide this interface. ">_Wolframe::db::Database</a>)</li>
<li>transaction (implements <a class="el" href="class__Wolframe_1_1db_1_1Transaction.html" title="Transaction interface. ">_Wolframe::db::Transaction</a>)</li>
<li>transaction execution statemachine (implements <a class="el" href="class__Wolframe_1_1db_1_1TransactionExecStatemachine.html" title="Interface to the database transaction execution statemechine. ">_Wolframe::db::TransactionExecStatemachine</a>)</li>
</ol>
</li>
<li>Have a look at the database modules currently implemented in src/modules/database as examples</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="ModuleExamples"></a>
Example modules for Wolframe</h1>
<h2><a class="anchor" id="FilterModule"></a>
Writing a content filter module for another format than XML or JSON</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="moduleFrameMacros_8hpp.html">appdevel/moduleFrameMacros.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="filterModuleMacros_8hpp.html">appdevel/filterModuleMacros.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="filter_8hpp.html">filter/filter.hpp</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <a class="code" href="class__Wolframe_1_1langbind_1_1FilterType.html">_Wolframe::langbind::FilterType</a>* createMyFilterType()</div>
<div class="line">{</div>
<div class="line">        <span class="comment">// ... here we create our own filter type object</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="moduleFrameMacros_8hpp.html#a5c94abd61d1619c761279522e203a4a4">WF_MODULE_BEGIN</a>( <span class="stringliteral">&quot;MyFilter&quot;</span>, <span class="stringliteral">&quot;my content filter&quot;</span>)</div>
<div class="line"> <a class="code" href="filterModuleMacros_8hpp.html#ab47a8dc31ae9827e0e6963a957e2858b">WF_FILTER_TYPE</a>( &quot;myfilter&quot;, MyFilterType::create)</div>
<div class="line"><a class="code" href="moduleFrameMacros_8hpp.html#ad59c3d56591ee809897499a5d99bcd04">WF_MODULE_END</a></div>
</div><!-- fragment --><h2><a class="anchor" id="FormFunctionModule"></a>
Writing a module for a form function (struct in, struct out) as function, that is callable by Wolframe and any language binding in your application</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="moduleFrameMacros_8hpp.html">appdevel/moduleFrameMacros.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="cppFormFunctionModuleMacros_8hpp.html">appdevel/cppFormFunctionModuleMacros.hpp</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">struct </span>MyInput</div>
<div class="line">{</div>
<div class="line">        std::string data;</div>
<div class="line">        <span class="keywordtype">int</span> id;</div>
<div class="line">        <span class="comment">// ... your data structures are here</span></div>
<div class="line"></div>
<div class="line">        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="class__Wolframe_1_1serialize_1_1StructDescriptionBase.html">_Wolframe::serialize::StructDescriptionBase</a> *getStructDescription()</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>MyInputDescription :<span class="keyword">public</span> serialize::StructDescription&lt;MyInput&gt;</div>
<div class="line">{</div>
<div class="line">        MyInputDescription()</div>
<div class="line">        {</div>
<div class="line">                <span class="comment">// here you define introspection for your data:</span></div>
<div class="line">                (*this)</div>
<div class="line">                        (<span class="stringliteral">&quot;data&quot;</span>, &amp;MyInput::data)</div>
<div class="line">                        (<span class="stringliteral">&quot;id&quot;</span>, &amp;MyInput::id)</div>
<div class="line">                ;</div>
<div class="line">        }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="class__Wolframe_1_1serialize_1_1StructDescriptionBase.html">_Wolframe::serialize::StructDescriptionBase</a>* MyInput::getStructDescription()</div>
<div class="line">{</div>
<div class="line">        <span class="keyword">static</span> MyInputDescription rt;</div>
<div class="line">        <span class="keywordflow">return</span> &amp;rt;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">struct </span>MyOutput</div>
<div class="line">{</div>
<div class="line">        <span class="comment">// ... your data structures are here as in MyInput</span></div>
<div class="line"></div>
<div class="line">        <span class="keyword">static</span> <span class="keyword">const</span> serialize::StructDescriptionBase *getStructDescription()</div>
<div class="line">        {</div>
<div class="line">                <span class="comment">// ... your data structure description is here as for MyInput</span></div>
<div class="line">        }</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> myFunction( proc::ExecContext* ctx, MyOutput&amp; res, <span class="keyword">const</span> MyInput&amp; param)</div>
<div class="line">{</div>
<div class="line">        <span class="comment">// ... your function implementation is here</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="moduleFrameMacros_8hpp.html#a5c94abd61d1619c761279522e203a4a4">WF_MODULE_BEGIN</a>( <span class="stringliteral">&quot;MyFunctions&quot;</span>, <span class="stringliteral">&quot;my functions short description&quot;</span>)</div>
<div class="line"> <a class="code" href="cppFormFunctionModuleMacros_8hpp.html#a67e8156f7bd7808f65b17c3090aa08fc">WF_FORM_FUNCTION</a>( &quot;myfunc&quot;, myFunction, MyOutput, MyInput)</div>
<div class="line"><a class="code" href="moduleFrameMacros_8hpp.html#ad59c3d56591ee809897499a5d99bcd04">WF_MODULE_END</a></div>
</div><!-- fragment --><h2><a class="anchor" id="CommandHandlerModule"></a>
Writing a command handler</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="commandHandlerModuleMacros_8hpp.html">appdevel/commandHandlerModuleMacros.hpp</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>MyCommandHandlerConfig</div>
<div class="line">        :<span class="keyword">public</span> <a class="code" href="class__Wolframe_1_1config_1_1NamedConfiguration.html">_Wolframe::config::NamedConfiguration</a></div>
<div class="line">{</div>
<div class="line">        <span class="comment">// ... your command handler configuration is here</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>MyCommandHandlerUnit</div>
<div class="line">        :<span class="keyword">public</span> <a class="code" href="class__Wolframe_1_1cmdbind_1_1CommandHandlerUnit.html">_Wolframe::cmdbind::CommandHandlerUnit</a></div>
<div class="line">{</div>
<div class="line">        <span class="comment">// ... your command handler unit definition is here</span></div>
<div class="line">        MyCommandHandlerUnit( <span class="keyword">const</span> MyCommandHandlerConfig* cfg)</div>
<div class="line">        {</div>
<div class="line">                <span class="comment">// ... required constructor from configuration</span></div>
<div class="line">        }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="moduleFrameMacros_8hpp.html#a5c94abd61d1619c761279522e203a4a4">WF_MODULE_BEGIN</a>( <span class="stringliteral">&quot;MyCommandHandler&quot;</span>, <span class="stringliteral">&quot;my command handler short description&quot;</span>)</div>
<div class="line"> <a class="code" href="commandHandlerModuleMacros_8hpp.html#aaf2b977b9619e27363795a61e7cdb441">WF_COMMAND_HANDLER</a>( &quot;MyCommandHandler&quot;, &quot;cmdhandler&quot;, &quot;mycmd&quot;, _Wolframe::cmdbind::CommandHandlerUnit, config::NamedConfiguration)</div>
<div class="line"><a class="code" href="moduleFrameMacros_8hpp.html#ad59c3d56591ee809897499a5d99bcd04">WF_MODULE_END</a></div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jul 20 2014 12:03:17 for Wolframe by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</div>
</div>
<!-- /content -->
<!-- Footer -->
<div class="wrapper row2">
	<div id="footer" class="clear">
		<div class="one_third first">
			<h2 class="footer_title">Documentation</h2>
			<nav class="footer_nav">
				<ul class="nospace">
					<li><a href="/documentation.html">User documentation</a></li>
					<li><a href="/documentation.html">Developer documentation</a></li>
				</ul>
			</nav>
		</div>
		<div class="one_third">
			<h2 class="footer_title">Downloads</h2>
			<nav class="footer_nav">
				<ul class="nospace">
					<li><a href="/downloads.html">Hosted on Github</a></li>
					<li><a href="/downloads.html">Packages on Sourceforge</a></li>
				</ul>
			</nav>
		</div>
		<div class="one_third">
			<h2 class="footer_title">Contact Us</h2>
			<nav class="footer_nav">
				<ul class="nospace">
					<li><strong>Email:</strong> <a href="/mailto:contact@wolframe.net">contact@wolframe.net</a></li>
					<li>
						<a id="googleplus-bttn" href="http://plus.google.com/116915890857205562872?prsrc=3" rel="publisher" target="_top" style="text-decoration:none;">
							<span>Google+</span></a>
						<a  id="linkedin-bttn" href="#" target="_top" style="text-decoration:none;">
							<span>LinkedIn</span></a>
						<a id="twitter-bttn" href="http://twitter.com/ProjectWolframe" target="_top" style="text-decoration:none;">
							<span>twitter</span></a>
						<a id="rss-bttn" href="#" target="_top" style="text-decoration:none;">
							<span>rss</span></a>
					</li>
					<li>
						<a href="https://twitter.com/ProjectWolframe" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @ProjectWolframe</a>
						<div class="google-follow-button"><div class="g-follow" data-annotation="none" data-height="20" data-href="http://plus.google.com/116915890857205562872" data-rel="publisher"></div></div>
						<div class="google-plusone-button"><div class="g-plusone" data-href="http://www.wolframe.net" data-size="medium"></div></div>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<div class="wrapper row4">
	<div id="copyright" class="clear">
		<p class="fl_left">Copyright &copy; 2014 - <a href="#">Project Wolframe</a> - All Rights Reserved</p>
		<p class="fl_right"><a href="/copyright.html">Copyrights and credits</a></p>
	</div>
</div>
<!-- Scripts -->
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.min.js"></script>
<script>window.jQuery || document.write('\x3Cscript src="/layout/scripts/jquery-latest.min.js">\x3C\/script>\
\x3Cscript src="/layout/scripts/jquery-ui.min.js">\x3C\/script>')</script>
<script>jQuery(document).ready(function($){ $('img').removeAttr('width height'); });</script>
<script src="/layout/scripts/jquery-mobilemenu.min.js"></script>
<script src="/layout/scripts/custom.js"></script>
<!-- Google analytics tracking -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-46433226-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- Tweeter follow script -->
<script>
	!function( d, s, id )	{
		var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location)?'http':'https';
		if( !d.getElementById( id ))	{
			js = d.createElement( s );
			js.id = id;
			js.src = p + '://platform.twitter.com/widgets.js';
			fjs.parentNode.insertBefore( js,fjs );
		}
	} ( document, 'script', 'twitter-wjs' );
</script>
<!-- Google +1, follow -->
<script type="text/javascript">
	window.___gcfg = {
		lang: 'en-US',
		parsetags: 'onload'
	};
	( function()	{
		var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
		po.src = 'https://apis.google.com/js/plusone.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	}) ();
</script>
</body>
</html>
