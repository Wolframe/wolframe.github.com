<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>2.3. Programming the Interface</title><link rel="stylesheet" type="text/css" href="/layout/styles/main.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Wolframe documentation" /><link rel="up" href="bk02ch02.html" title="Chapter 2. The Wolframe Standard Client" /><link rel="prev" href="bk02ch02s02.html" title="2.2. Artifacts" /><link rel="next" href="bk02ch02s04.html" title="2.4. Eliminating Interface Defects" />
	<title xmlns="">Project Wolframe</title>
	<meta xmlns="" charset="iso-8859-1" />
	<meta xmlns="" name="viewport" content="width=device-width, initial-scale=1.0" />

	<link xmlns="" rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />

	<link xmlns="" href="/layout/styles/main.css" rel="stylesheet" type="text/css" media="all" />
	<link xmlns="" href="/layout/styles/mediaqueries.css" rel="stylesheet" type="text/css" media="all" />

	<!--[if lt IE 9]>
		<link href="/layout/styles/ie/ie8.css" rel="stylesheet" type="text/css" media="all" />
		<script src="/layout/scripts/ie/css3-mediaqueries.min.js"></script>
		<script src="/layout/scripts/ie/html5shiv.min.js"></script>
	<![endif]-->


</head><body>


<div xmlns="" class="wrapper row1">
	<header id="header" class="full_width clear">
		<div id="header-logo">
			<h1><a href="/index.html">Project Wolframe</a></h1>
			<h2>The Straight Path to Successful Projects</h2>
		</div>
		<div id="header-contact">
			<ul class="list none">
				<li><span class="fa fa-envelope"></span> <a href="/mailto:contact@wolframe.net">contact@wolframe.net</a></li>
<!--				<li><span class="fa fa-phone"></span> +xx xxx xxxxxxxxxx</li> -->
			</ul>
			<ul class="list none">
				<li class="icons"><a id="googleplus-bttn" href="http://plus.google.com/116915890857205562872?prsrc=3" rel="publisher" target="_top" style="text-decoration:none;">
					<span>Google+</span></a></li>
				<li class="icons"><a id="linkedin-bttn" href="#" target="_top" style="text-decoration:none;">
					<span>LinkedIn</span></a></li>
				<li class="icons"><a id="twitter-bttn" href="http://twitter.com/ProjectWolframe" target="_top" style="text-decoration:none;">
					<span>twitter</span></a></li>
				<li class="icons"><a id="rss-bttn" href="#" target="_top" style="text-decoration:none;">
					<span>rss</span></a></li>
			</ul>
		</div>
	</header>
</div>

<!-- ################################################################################################ -->
<div xmlns="" class="wrapper row2">
	<nav id="topnav">
		<ul class="clear">
<!-- BEGIN MENU -->
			<li><a href="/index.html" title="Home">Home</a></li>
<!--
			<li><a href="/solutions.html" title="Solutions">Solutions</a></li>
-->
			<li><a href="/downloads.html" title="Downloads">Downloads</a></li>
			<li class="active"><a href="/documentation.html" title="Documentation">Documentation</a></li>
			<li><a class="drop" href="/support.html" title="Support">Support</a>
				<ul>
					<li><a href="/faq.html" title="FAQ">FAQ</a></li>
					<li><a href="http://www.wolframe.ch/mailman/listinfo" title="Mailing lists">Mailing lists</a></li>
				</ul>
			</li>
			<li class="last-child"><a href="/contact.html" title="Contact Us">Contact Us</a></li>
<!-- END MENU -->
		</ul>
	</nav>
</div>

<!-- ################################################################################################ -->
<div class="wrapper row3"><div id="container"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.3. Programming the Interface</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="bk02ch02s02.html">Prev</a> </td><th width="60%" align="center">Chapter 2. The Wolframe Standard Client</th><td width="20%" align="right"> <a accesskey="n" href="bk02ch02s04.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp1402469244"></a>2.3. Programming the Interface</h2></div></div></div><p>
		Programming means we annotate the XML of the UI form files with
		some extra properties. They control the following things:
		</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
				Which events in the current form replace it with a new form,
				e. g. clicking the <span class="emphasis"><em>Edit</em></span> button loads
				the form called <span class="emphasis"><em>edit_item</em></span>.
			</p></li><li class="listitem"><p>
				When and how requests to the Wolframe server should be sent
				and how the results should be interpreted when adding data
				to the widgets, e.g. executing a <span class="emphasis"><em>save item request</em></span>
				with all the data in the text fields of the form added to the request
				XML.
			</p></li></ul></div><p>
	</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp1402459124"></a>2.3.1. Mapping XML Data</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="idp1402459468"></a>Starting Position</h4></div></div></div><p>For mapping data structures from the user interface elements to the
			data description needed to fulfill an interface for a server request we need
			some kind of translation. An implicit mapping would only be able to describe
			very trivial data mappings. After drawing the user interface this translation
			has to be defined. On the other hand the requests answer returned by the server
			has to be mapped to be shown in the user interface elements view. Here applies
			the same: Some kind of translation is needed to map a server data structure
			to the user interface elements.
			</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="idp1402486460"></a>First Example</h4></div></div></div><p>
				Let's have a look at a <code class="classname">QLineEdit</code>
				element of a form and a possible XML representation of the
				data used for a request.
			</p><div class="screenshot"><div class="mediaobject"><img src="images/clients/simple_form.png" /></div></div><pre class="programlisting">
			
&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;!DOCTYPE customer SYSTEM 'Customer'&gt;
&lt;customer&gt;
  &lt;name&gt;John Smith&lt;/name&gt;
  &lt;address&gt;Blue Police Box&lt;/address&gt;
&lt;/customer&gt;

			</pre><p>
				For an insert or update request that transmits all data of the form to the
				server we have to fill the name field and the address field into the request
				data structure XML.
				The translation is defined as dynamic property "action" or "action." plus a suffix for the action identifier
				if needed. We will explain this naming of actions later. The
				value of the property is describing the request and could look as follows:
			</p><pre class="programlisting">
			update: Customer customer {name{{main.name}}; address{{main.address}}}

			</pre><p>
				For the initial filling of the form with data we submit a
				request that just sends an id to the server.
				The answer that is returned by the server has then to be
				translated to fill the name field and the address field
				of the form.
				The translation is defined as dynamic property "answer"
				or "answer." plus a suffix for the action identifier.
				As in the request example we postpone a detailed explanation
				of this action naming semantics.
				The value of the property is describing the answer
				in the same language as a request and could look as follows.
				A detailed description of the language used to describe requests
				and answers will follow later.
			</p><pre class="programlisting">
			Customer customer {name{{main.name}}; address{{main.address}}}

			</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="idp1402513812"></a>Another Example</h4></div></div></div><p>
				Some elements are more complicated than that.
				They present the user a list of options or items the user to pick from, e.g. a list of cities.
			</p><div class="screenshot"><div class="mediaobject"><img src="images/clients/complex_form.png" /></div></div><p>
				When the form is saved, the currently selected element is written into
				the resulting XML:
			</p><pre class="programlisting">
			
&lt;customer&gt;
  &lt;name&gt;John Smith&lt;/name&gt;
  &lt;address&gt;Blue Police Box&lt;/address&gt;
  &lt;city&gt;6&lt;/city&gt;
&lt;/customer&gt;

			</pre><p>
				In this case the widget with the city list can load its own domain data as a separate
				XML request:
			</p><pre class="programlisting">
			
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE city SYSTEM 'CityListRequest'&gt;
&lt;cities/&gt;

			</pre><p>
				and the corresponding domain load request answer definition in the dynamic property "answer"
				could look like follows:
			</p><pre class="programlisting">
			CityList cities {city[] {id={main.city.id}; {main.city.value}}}

			</pre><p>
				The answer contains all possible values in the domain, in our case
				a list of all cities and their internal id.
			</p><pre class="programlisting">
			
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
&lt;!DOCTYPE "cities" SYSTEM "CityList"&gt;
&lt;cities&gt;
&lt;city id='1'&gt;Tokyo&lt;/city&gt;
&lt;city id='2'&gt;Lima&lt;/city&gt;
&lt;city id='3'&gt;Beijing&lt;/city&gt;
&lt;city id='4'&gt;Cairo&lt;/city&gt;
&lt;city id='5'&gt;Tehran&lt;/city&gt;
&lt;city id='6'&gt;London&lt;/city&gt;
&lt;/cities&gt;

			</pre></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp1402521828"></a>2.3.2. Switching UI forms</h3></div></div></div><p>
			A UI form contains a set of widgets, the dynamic property
			<code class="code">form</code> contains the name of a widget (without
			extension <span class="emphasis"><em>.ui</em></span>) to load.
		</p><p>
			For linking a push <code class="classname">QPushButton</code> click in the Qt designer
			to the switching of the form you have to attach a dynamic property
			named <code class="code">form</code>	of type <code class="code">string</code> to the corresponding
			widget of type <code class="classname">QPushButton</code>:

			</p><div class="screenshot"><div class="mediaobject"><img src="images/clients/action_on_pushbutton.png" /></div></div><p>

		</p><p>
			Before loading the next form the client terminates all current
			requests, for instance a save request of the form data.
			In case of an error in an action any defined switching of the form is cancelled.
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp1402526740"></a>2.3.3. States and properties of widgets</h3></div></div></div><p>
			Some properties are reserved for states steering the behavior of the user interface:

			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="code">initialFocus</code>:
				This is a thing which got forgotten in the Qt design.
				We can set a boolean value to one widget in a form which should
				get the initial keyboard focus.
				</p></li></ul></div><p>
		</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp1402528340"></a>2.3.4. Widget properties as dynamic property values</h3></div></div></div><p>
			Dynamic properties can reference properties of widgets
			like for example <code class="code">property = {variable expression}</code>.
		</p><p>
			The expression can reference addressable widgets and their properties.
			Every Qt class has its very own set of properties it understands.
		</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="bk02ch02s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="bk02ch02.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="bk02ch02s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2.2. Artifacts </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 2.4. Eliminating Interface Defects</td></tr></table></div></div></div>

<!-- Footer -->
<div xmlns="" class="wrapper row2">
	<div id="footer" class="clear">
<!--
		<div class="one_quarter first">
			<h2 class="footer_title">Solutions</h2>
			<nav class="footer_nav">
				<ul class="nospace">
					<li><a href="#">Simple CRM</a></li>
					<li><a href="#">Bug reporting tool</a></li>
					<li><a href="#">Message broker</a></li>
				</ul>
			</nav>
		</div>
-->
<!--		<div class="one_quarter">-->
		<div class="one_third first">
			<h2 class="footer_title">Documentation</h2>
			<nav class="footer_nav">
				<ul class="nospace">
					<li><a href="/documentation.html">User documentation</a></li>
					<li><a href="/documentation.html">Developer documentation</a></li>
				</ul>
			</nav>
		</div>

<!--		<div class="one_quarter">-->
		<div class="one_third">
			<h2 class="footer_title">Downloads</h2>
			<nav class="footer_nav">
				<ul class="nospace">
					<li><a href="/downloads/downloads_wolframe.html">Wolframe server</a></li>
					<li><a href="/downloads/downloads_wolfclient.html">Wolframe client</a></li>
				</ul>
			</nav>
		</div>

<!--		<div class="one_quarter">-->
		<div class="one_third">
			<h2 class="footer_title">Contact Us</h2>
			<nav class="footer_nav">
				<ul class="nospace">
					<li><strong>Email:</strong> <a href="/mailto:contact@wolframe.net">contact@wolframe.net</a></li>
					<li>
						<a href="https://twitter.com/ProjectWolframe" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @ProjectWolframe</a>
						<div class="g-follow" data-annotation="none" data-height="20" data-href="http://plus.google.com/116915890857205562872" data-rel="publisher"></div>
						<div class="g-plusone" data-href="http://www.wolframe.net" data-size="tall" data-annotation="none"></div>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>

<div xmlns="" class="wrapper row4">
	<div id="copyright" class="clear">
		<p class="fl_left">Copyright © 2013 - <a href="#">Project Wolframe</a> - All Rights Reserved</p>
		<p class="fl_right"><a href="/copyright.html">Copyright and web credits</a> - Template by <a href="http://www.os-templates.com/" title="Free Website Templates">OS Templates</a></p>
	</div>
</div>

<!-- Scripts -->
<script xmlns="" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script xmlns="" src="http://code.jquery.com/ui/1.10.1/jquery-ui.min.js"></script>
<script xmlns="">window.jQuery || document.write('\x3Cscript src="/layout/scripts/jquery-latest.min.js"&gt;\x3C\/script&gt;\
\x3Cscript src="/layout/scripts/jquery-ui.min.js"&gt;\x3C\/script&gt;')</script>
<script xmlns="">jQuery(document).ready(function($){ $('img').removeAttr('width height'); });</script>
<script xmlns="" src="/layout/scripts/jquery-mobilemenu.min.js"></script>
<script xmlns="" src="/layout/scripts/custom.js"></script>
<!-- Tweeter follow script -->
<script xmlns="">
	!function( d, s, id )	{
		var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location)?'http':'https';
		if( !d.getElementById( id ))	{
			js = d.createElement( s );
			js.id = id;
			js.src = p + '://platform.twitter.com/widgets.js';
			fjs.parentNode.insertBefore( js,fjs );
		}
	} ( document, 'script', 'twitter-wjs' );
</script>
<!-- Google +1, follow -->
<script xmlns="" type="text/javascript">
	window.___gcfg = {
		lang: 'en-US',
		parsetags: 'onload'
	};
	( function()	{
		var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
		po.src = 'https://apis.google.com/js/plusone.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	}) ();
</script>

</body></html>