<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 4. Forms</title><link rel="stylesheet" type="text/css" href="/layout/styles/main.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Wolframe documentation" /><link rel="up" href="bk01.html" title="Developing Wolframe Server Applications" /><link rel="prev" href="bk01ch03s06.html" title="3.6. Functions in C++" /><link rel="next" href="bk01ch05.html" title="Chapter 5. Filters" />
	<title xmlns="">Project Wolframe</title>
	<meta xmlns="" charset="utf-8" />
	<meta xmlns="" name="viewport" content="width=device-width, initial-scale=1.0" />

	<link xmlns="" rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />

	<link xmlns="" href="/layout/styles/main.css" rel="stylesheet" type="text/css" media="all" />
	<link xmlns="" href="/layout/styles/mediaqueries.css" rel="stylesheet" type="text/css" media="all" />

	<!--[if lt IE 9]>
		<link href="/layout/styles/ie/ie8.css" rel="stylesheet" type="text/css" media="all" />
		<script src="/layout/scripts/ie/css3-mediaqueries.min.js"></script>
		<script src="/layout/scripts/ie/html5shiv.min.js"></script>
	<![endif]-->


</head><body>


<div xmlns="" class="wrapper row1">
	<header id="header" class="full_width clear">
		<div id="header-logo">
			<h1><a href="/index.html">Project Wolframe</a></h1>
			<h2>The Straight Path to Successful Projects</h2>
		</div>
		<div id="header-search">
			<form id="cse-search-box" action="http://www.wolframe.org/gsearch.html">
				<input type="hidden" name="cx" value="007231504736047898702:wrnjvfljzvu" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" size="31" />
<!--				<input type="submit" name="sa" value="&#xf002;" /> -->
				<input type="submit" name="sa" class="search-bttn" value="" />
			</form>
		</div>
	</header>
</div>

<!-- ################################################################################################ -->
<div xmlns="" class="wrapper row2">
	<nav id="topnav">
		<ul class="clear">
<!-- BEGIN MENU -->
			<li><a href="/index.html" title="Home">Home</a></li>
			<li><a href="/downloads.html" title="Downloads">Downloads</a></li>
			<li class="active"><a href="/documentation.html" title="Documentation">Documentation</a></li>
			<li><a class="drop" href="/support.html" title="Support">Support</a>
				<ul>
					<li><a href="/faq.html" title="FAQ">FAQ</a></li>
					<li><a href="http://sourceforge.net/p/wolframe/mailman/" title="Mailing lists">Mailing lists</a></li>
				</ul>
			</li>
			<li class="last-child"><a href="/contact.html" title="Contact Us">Contact Us</a></li>
<!-- END MENU -->
		</ul>
	</nav>
</div>

<!-- ################################################################################################ -->
<div class="wrapper row3"><div id="container"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 4. Forms</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="bk01ch03s06.html">Prev</a> </td><th width="60%" align="center">Developing Wolframe Server Applications</th><td width="20%" align="right"> <a accesskey="n" href="bk01ch05.html">Next</a></td></tr></table><hr /></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="idp1381822540"></a>Chapter 4. Forms</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="sect1"><a href="bk01ch04.html#idp1381869244">4.1. Form Data Definition Languages</a></span></dt><dd><dl><dt><span class="sect2"><a href="bk01ch04.html#idp1381869564">4.1.1. Introduction</a></span></dt><dt><span class="sect2"><a href="bk01ch04.html#idp1381859924">4.1.2. Forms in Simpleform DDL</a></span></dt></dl></dd></dl></div><p>
Forms are data structures used to validate input and output data and to do some basic normalization
in order to make data accessible in a uniform way. Forms are defined in a data definition language
(<acronym class="acronym">DDL</acronym>) and translated by a compiler at startup. Those compilers are defined as loadable
modules.
</p><p>
This chapter describes how form data schemas are linked to the logic tier. It introduces a data description
language (<acronym class="acronym">DDL</acronym>) called <code class="code">simpleform</code> that allows you to specify data schemas with the validation and 
normalization of atomic types. It also describes the <span class="application">Wolframe</span> module concept for form descriptions that 
allows you to add a compiler for your existing data schemas.
</p><p>
After reading this chapter you should be able to write data forms of <span class="application">Wolframe</span> of the  logic tier 
in the <code class="code">simpleform</code> data description language on your own. You should also know how a new data description
language (<acronym class="acronym">DDL</acronym>) could be added.
</p><p>
Be aware that you have to configure a data description language type (<acronym class="acronym">DDL</acronym> compiler) of the logic tier 
in <span class="application">Wolframe</span> before using it. Each chapter introducing a data form description language will have 
a section that describes how the server configuration of <span class="application">Wolframe</span> has to be extended for its availability.
</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp1381869244"></a>4.1. Form Data Definition Languages</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp1381869564"></a>4.1.1. Introduction</h3></div></div></div><p>
		Form data structures can be defined in a <acronym class="acronym">DDL</acronym> (Data Definition Language).
		It depends very much on the application what <acronym class="acronym">DDL</acronym> is best to use.
		Users may already have their data definitions defined in a certain way.
		The form <acronym class="acronym">DDL</acronym> can be defined in the way you want. Wolframe offers a
		plugin mechanism for <acronym class="acronym">DDL</acronym> compilers and provides examples of such compilers.
		You configure the <acronym class="acronym">DDL</acronym> sources to load and the compiler to use.
	</p><p>
		With the <acronym class="acronym">DDL</acronym> form description we get a deserialization of some content
		into a structure and a serialization for the output. We get also a validation
		and normalization procedure of the content by assigning types to atomic form
		elements that validate and normalize the data elements.
		Most of the business transactions should be doable as input form
		description, output form description and a transaction that maps
		input to output without control flow aware programming (direct map).
	</p><p>
		All types of data forms introduced here are equivalent in use for all programs.
	</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="idp1381859924"></a>4.1.2. Forms in Simpleform DDL</h3></div></div></div><p>
		As example of a form <acronym class="acronym">DDL</acronym> we provide the <em class="glossterm">simpleform</em> <acronym class="acronym">DDL</acronym>. The format is based on the "INFO"-format
		introduced by Marcin Kalicinski for the boost property tree library. We used this library to show an example
		that is easy to understand and small enough.
		The format uses key value pairs separated with spaces for atomic elements and curly brackets '{' '}' to describe structures.
		The key represents the name of the element and the value represents the type of the element.
		The type is defined by a typename and some operators that describe additional properties.
	</p><p>
		Each form declaration starts with a keyword 'FORM' or 'STRUCT'. The difference between 'FORM' and 'STRUCT' is that the later is used for declarations that are only referenced inside the same file as sub structure reference,
		while 'FORM' declares a structure to be exported as global form declaration.
		This header is followed by the structure declaration inside curly brackets '{' '}'.
	</p><p>
		There is only one predefined data type known in <em class="glossterm">simpleform</em> <acronym class="acronym">DDL</acronym>: "string".
		All other data types are defined as sequence of 'normalizer' functions in a normalize definition file.
		The 'normalizer' functions assigned to a type validate the value and transform it to its normalized form.
	</p><p>
		The following element attributes are known in <em class="glossterm">simpleform</em> <acronym class="acronym">DDL</acronym>:
		
		</p><div class="table"><a id="idp1381905948"></a><p class="title"><strong>Table 4.1. element attributes in simpleform</strong></p><div class="table-contents"><table summary="element attributes in simpleform" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Attribute</th><th>Location</th><th>Description</th></tr></thead><tbody><tr><td>@</td><td>prefix of data type</td><td>Expresses that the element is an attribute and not a content element of the structure. This has only influence on the XML or similar representation of the form content</td></tr><tr><td>?</td><td>prefix of data type</td><td>Expresses that the element is optional also in strict validation</td></tr><tr><td>^</td><td>prefix of form name</td><td>Expresses that the element is optional and refers to a structure defined in the same module that is expanded only if the element is present. With this construct it is possible to define recursive structures like trees.</td></tr><tr><td>!</td><td>prefix of data type</td><td>Expresses that the element is always mandatory (also in non strict validation)</td></tr><tr><td>[]</td><td>prefix of data type</td><td>Expresses that the element is an array of this type</td></tr><tr><td>[]</td><td>without data type</td><td>Expresses this element is an array of structures and that the structure defined describes the prototype (initialization) element of the array.</td></tr><tr><td>(..)</td><td>postfix of data type</td><td>Expresses that '..' (represents any valid value not containing brackets) is the default initialization value of this element.</td></tr></tbody></table></div></div><p><br class="table-break" />
	</p><p>
		Using a single underscore as typename ('_') means that element is embedded into the structure
		without being referenceable by name. In case of an atomic value it means that value represents the
		content value of the structure. In case of a substructure it means that the structure inherits
		the embedded elements of the substructure.
	</p><p>
		The following example shows a form defined in <em class="glossterm">simpleform</em> <acronym class="acronym">DDL</acronym>.
		</p><pre class="programlisting">
		
FORM Customer
{
   customer
   {
       ID !@int                  ; Internal customer id (mandatory)
       name string               ; Name of the customer
       canonical_Name string     ; Customer name in canonical form
       country string            ; Country
       locality ?string          ; Locality (optional)
   }
}

		</pre><p>
	</p></div><p></p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="bk01ch03s06.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="bk01.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="bk01ch05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3.6. Functions in C++ </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 5. Filters</td></tr></table></div></div></div>

<!-- Footer -->
<div xmlns="" class="wrapper row2">
	<div id="footer" class="clear">
		<div class="one_third first">
			<h2 class="footer_title">Documentation</h2>
			<nav class="footer_nav">
				<ul class="nospace">
					<li><a href="/documentation.html">User documentation</a></li>
					<li><a href="/documentation.html">Developer documentation</a></li>
				</ul>
			</nav>
		</div>

		<div class="one_third">
			<h2 class="footer_title">Downloads</h2>
			<nav class="footer_nav">
				<ul class="nospace">
					<li><a href="/downloads.html">Hosted on Github</a></li>
					<li><a href="/downloads.html">Packages on Sourceforge</a></li>
				</ul>
			</nav>
		</div>

		<div class="one_third">
			<h2 class="footer_title">Contact Us</h2>
			<nav class="footer_nav">
				<ul class="nospace">
					<li><strong>Email:</strong> <a href="/mailto:contact@wolframe.net">contact@wolframe.net</a></li>
					<li>
						<a id="googleplus-bttn" href="http://plus.google.com/116915890857205562872?prsrc=3" rel="publisher" target="_top" style="text-decoration:none;">
							<span>Google+</span></a>
						<a id="linkedin-bttn" href="#" target="_top" style="text-decoration:none;">
							<span>LinkedIn</span></a>
						<a id="twitter-bttn" href="http://twitter.com/ProjectWolframe" target="_top" style="text-decoration:none;">
							<span>twitter</span></a>
						<a id="rss-bttn" href="#" target="_top" style="text-decoration:none;">
							<span>rss</span></a>
					</li>
					<li>
						<a href="https://twitter.com/ProjectWolframe" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @ProjectWolframe</a>
						<div class="google-follow-button"><div class="g-follow" data-annotation="none" data-height="20" data-href="http://plus.google.com/116915890857205562872" data-rel="publisher"></div></div>
						<div class="google-plusone-button"><div class="g-plusone" data-href="http://www.wolframe.net" data-size="medium"></div></div>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>

<div xmlns="" class="wrapper row4">
	<div id="copyright" class="clear">
		<p class="fl_left">Copyright © 2013 - <a href="#">Project Wolframe</a> - All Rights Reserved</p>
		<p class="fl_right"><a href="/copyright.html">Copyrights and credits</a></p>
	</div>
</div>

<!-- Scripts -->
<script xmlns="" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script xmlns="" src="http://code.jquery.com/ui/1.10.1/jquery-ui.min.js"></script>
<script xmlns="">window.jQuery || document.write('\x3Cscript src="/layout/scripts/jquery-latest.min.js"&gt;\x3C\/script&gt;\
\x3Cscript src="/layout/scripts/jquery-ui.min.js"&gt;\x3C\/script&gt;')</script>
<script xmlns="">jQuery(document).ready(function($){ $('img').removeAttr('width height'); });</script>
<script xmlns="" src="/layout/scripts/jquery-mobilemenu.min.js"></script>
<script xmlns="" src="/layout/scripts/custom.js"></script>

<!-- Tweeter follow script -->
<script xmlns="">
	!function( d, s, id )	{
		var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location)?'http':'https';
		if( !d.getElementById( id ))	{
			js = d.createElement( s );
			js.id = id;
			js.src = p + '://platform.twitter.com/widgets.js';
			fjs.parentNode.insertBefore( js,fjs );
		}
	} ( document, 'script', 'twitter-wjs' );
</script>

<!-- Google +1, follow -->
<script xmlns="" type="text/javascript">
	window.___gcfg = {
		lang: 'en-US',
		parsetags: 'onload'
	};
	( function()	{
		var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
		po.src = 'https://apis.google.com/js/plusone.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	}) ();
</script>

</body></html>